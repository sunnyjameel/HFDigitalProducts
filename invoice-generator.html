<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Invoice Generator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .invoice-preview {
            background-color: white;
            padding: 2rem;
            /* For print, maintain A4 aspect ratio */
            min-height: 297mm; /* A4 height */
            width: 210mm; /* A4 width */
            margin: 20px auto;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        /* Adjust for smaller screens without breaking A4 print dimensions */
        @media screen and (max-width: 768px) {
            .invoice-preview {
                width: 100%; /* Take full width on small screens */
                min-height: auto; /* Allow height to adjust */
                padding: 1rem; /* Smaller padding on mobile */
                box-shadow: none; /* No shadow on small screens for better fit */
            }
        }

        /* Hide form controls when printing */
        @media print {
            .no-print {
                display: none !important;
            }
            .invoice-preview {
                box-shadow: none !important;
                border: none !important;
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
                height: 100% !important;
            }
            body {
                margin: 0;
                padding: 0;
            }
        }
        /* Custom scrollbar for tables on small screens */
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* For smooth scrolling on iOS */
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-200 to-purple-300 min-h-screen flex items-center justify-center p-4">
    <div id="root"></div>

    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel CDN - for JSX transformation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- html2canvas for screenshot functionality (optional, but good for download) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script type="text/babel">
        const translations = {
            ur: {
                appTitle: "انوائس جنریٹر",
                tagline: "پیشہ ورانہ انوائس آسانی سے بنائیں۔",
                selectLanguage: "زبان منتخب کریں:",
                invoiceDetails: "انوائس کی تفصیلات",
                invoiceNumber: "انوائس نمبر",
                invoiceDate: "انوائس کی تاریخ",
                dueDate: "آخری تاریخ",
                companyInfo: "کمپنی کی معلومات",
                companyName: "کمپنی کا نام",
                companyAddress: "کمپنی کا پتہ",
                companyPhone: "کمپنی کا فون",
                companyEmail: "کمپنی کا ای میل",
                companyLogo: "کمپنی کا لوگو (اختیاری)",
                clientInfo: "کلائنٹ کی معلومات",
                clientName: "کلائنٹ کا نام",
                clientAddress: "کلائنٹ کا پتہ",
                items: "آئٹمز",
                description: "تفصیل",
                quantity: "مقدار",
                unitPrice: "فی یونٹ قیمت",
                total: "کل",
                addItem: "آئٹم شامل کریں",
                subtotal: "سب ٹوٹل",
                taxRate: "ٹیکس کی شرح (%)",
                discount: "ڈسکاؤنٹ (Rs.)",
                grandTotal: "گرانڈ ٹوٹل",
                notesTerms: "نوٹس / شرائط و ضوابط",
                printInvoice: "انوائس پرنٹ کریں",
                downloadInvoice: "انوائس ڈاؤن لوڈ کریں (PNG)",
                downloadFailMessage: "ڈاؤن لوڈ ناکام ہو گیا۔ براہ کرم اسکرین شاٹ لینے کی کوشش کریں۔",
                delete: "حذف کریں",
                logoPreview: "لوگو کا پیش نظارہ",
                maxSize: "زیادہ سے زیادہ سائز 2MB",
                noPreview: "کوئی پیش نظارہ نہیں",
                itemTotal: "آئٹم کا کل",
                currency: "Rs.",
                loading: "لوڈ ہو رہا ہے...",
                errorImageSize: "تصویر کا سائز 2MB سے زیادہ نہیں ہونا چاہیے۔"
            },
            en: {
                appTitle: "Invoice Generator",
                tagline: "Generate professional invoices with ease.",
                selectLanguage: "Select Language:",
                invoiceDetails: "Invoice Details",
                invoiceNumber: "Invoice Number",
                invoiceDate: "Invoice Date",
                dueDate: "Due Date",
                companyInfo: "Company Information",
                companyName: "Company Name",
                companyAddress: "Company Address",
                companyPhone: "Company Phone",
                companyEmail: "Company Email",
                companyLogo: "Company Logo (Optional)",
                clientInfo: "Client Information",
                clientName: "Client Name",
                clientAddress: "Client Address",
                items: "Items",
                description: "Description",
                quantity: "Quantity",
                unitPrice: "Unit Price",
                total: "Total",
                addItem: "Add Item",
                subtotal: "Subtotal",
                taxRate: "Tax Rate (%)",
                discount: "Discount (Rs.)",
                grandTotal: "Grand Total",
                notesTerms: "Notes / Terms & Conditions",
                printInvoice: "Print Invoice",
                downloadInvoice: "Download Invoice (PNG)",
                downloadFailMessage: "Download failed. Please try taking a screenshot instead.",
                delete: "Delete",
                logoPreview: "Logo Preview",
                maxSize: "Max size 2MB",
                noPreview: "No Preview",
                itemTotal: "Item Total",
                currency: "Rs.",
                loading: "Loading...",
                errorImageSize: "Image size should not exceed 2MB."
            }
        };

        const App = () => {
            const [language, setLanguage] = React.useState('ur'); // Default to Urdu
            const t = translations[language]; // Get current language translations

            const initialInvoiceState = {
                invoiceNumber: 'INV-001',
                invoiceDate: new Date().toISOString().split('T')[0],
                dueDate: new Date(new Date().setDate(new Date().getDate() + 7)).toISOString().split('T')[0],
                companyName: 'Your Company Name',
                companyAddress: '123 Main Street, City, Country',
                companyPhone: '+92 3XX XXXXXXX',
                companyEmail: 'info@yourcompany.com',
                logoImage: '',
                clientName: 'Client Name',
                clientAddress: 'Client Address, City, Country',
                taxRate: 0,
                discount: 0,
                notes: 'Thank you for your business!',
            };

            const [invoiceDetails, setInvoiceDetails] = React.useState(() => {
                try {
                    const storedDetails = JSON.parse(localStorage.getItem('invoiceDetails'));
                    return storedDetails ? { ...initialInvoiceState, ...storedDetails } : initialInvoiceState;
                } catch (e) {
                    console.error("Failed to load invoice details from local storage:", e);
                    return initialInvoiceState;
                }
            });

            const initialItems = [{ id: 1, description: 'Product/Service 1', quantity: 1, unitPrice: 100 }];
            const [items, setItems] = React.useState(() => {
                try {
                    const storedItems = JSON.parse(localStorage.getItem('invoiceItems'));
                    return storedItems && storedItems.length > 0 ? storedItems : initialItems;
                } catch (e) {
                    console.error("Failed to load invoice items from local storage:", e);
                    return initialItems;
                }
            });

            // Save to local storage whenever state changes
            React.useEffect(() => {
                localStorage.setItem('invoiceDetails', JSON.stringify(invoiceDetails));
            }, [invoiceDetails]);

            React.useEffect(() => {
                localStorage.setItem('invoiceItems', JSON.stringify(items));
            }, [items]);

            // Ref for the printable area
            const invoiceRef = React.useRef(null);

            // Handle changes for invoice details
            const handleInvoiceDetailChange = (e) => {
                const { name, value } = e.target;
                setInvoiceDetails(prev => ({ ...prev, [name]: value }));
            };

            // Handle logo upload
            const handleLogoUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    if (file.size > 2 * 1024 * 1024) { // Max 2MB
                        alert(t.errorImageSize);
                        return;
                    }
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setInvoiceDetails(prev => ({ ...prev, logoImage: reader.result }));
                    };
                    reader.readAsDataURL(file);
                }
            };

            // Handle changes for item fields
            const handleItemChange = (id, e) => {
                const { name, value } = e.target;
                setItems(prev => prev.map(item =>
                    item.id === id ? { ...item, [name]: name === 'quantity' || name === 'unitPrice' ? parseFloat(value) || 0 : value } : item
                ));
            };

            // Add new item row
            const addItem = () => {
                setItems(prev => [...prev, { id: Date.now(), description: '', quantity: 1, unitPrice: 0 }]);
            };

            // Delete item row
            const deleteItem = (id) => {
                setItems(prev => prev.filter(item => item.id !== id));
            };

            // Calculations
            const calculateItemTotal = (quantity, unitPrice) => {
                return (quantity * unitPrice).toFixed(2);
            };

            const subtotal = items.reduce((sum, item) => sum + (item.quantity * item.unitPrice), 0);
            const taxAmount = subtotal * (invoiceDetails.taxRate / 100);
            const grandTotal = (subtotal + taxAmount - invoiceDetails.discount).toFixed(2);

            // Print functionality
            const handlePrint = () => {
                window.print();
            };

            // Download as PNG functionality
            const downloadInvoice = () => {
                if (invoiceRef.current) {
                    html2canvas(invoiceRef.current, {
                        useCORS: true,
                        allowTaint: true,
                        scale: 2 // Increase scale for better resolution
                    }).then(canvas => {
                        const link = document.createElement('a');
                        link.download = `Invoice_${invoiceDetails.invoiceNumber}.png`;
                        link.href = canvas.toDataURL('image/png');
                        link.click();
                    }).catch(err => {
                        console.error("Error generating image:", err);
                        alert(t.downloadFailMessage);
                    });
                }
            };

            return (
                <div className="min-h-screen flex flex-col items-center justify-center py-10 w-full">
                    <div className="bg-white rounded-3xl shadow-2xl p-6 md:p-10 max-w-6xl w-full flex flex-col lg:flex-row gap-8 transform transition-all duration-300 hover:scale-[1.005] border-4 border-purple-400">
                        {/* Input Form Section */}
                        <div className="w-full lg:w-1/2 p-4 border-r-0 lg:border-r-2 border-purple-200 pr-8 no-print">
                            <h2 className="text-3xl font-extrabold text-purple-700 mb-6 text-center">
                                {t.invoiceDetails}
                            </h2>

                            {/* Language Selector */}
                            <div className="mb-6 flex justify-end items-center gap-2 w-full">
                                <label htmlFor="language-select" className="block text-gray-700 text-sm font-bold">{t.selectLanguage}</label>
                                <select
                                    id="language-select"
                                    value={language}
                                    onChange={(e) => setLanguage(e.target.value)}
                                    className="p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                >
                                    <option value="ur">اردو (Urdu)</option>
                                    <option value="en">English</option>
                                </select>
                            </div>

                            {/* Invoice Meta Info */}
                            <div className="mb-6 border-b pb-4">
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label htmlFor="invoiceNumber" className="block text-gray-700 text-sm font-bold mb-2">{t.invoiceNumber}</label>
                                        <input type="text" name="invoiceNumber" id="invoiceNumber" value={invoiceDetails.invoiceNumber} onChange={handleInvoiceDetailChange} className="p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                    </div>
                                    <div>
                                        <label htmlFor="invoiceDate" className="block text-gray-700 text-sm font-bold mb-2">{t.invoiceDate}</label>
                                        <input type="date" name="invoiceDate" id="invoiceDate" value={invoiceDetails.invoiceDate} onChange={handleInvoiceDetailChange} className="p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                    </div>
                                    <div className="md:col-span-2">
                                        <label htmlFor="dueDate" className="block text-gray-700 text-sm font-bold mb-2">{t.dueDate}</label>
                                        <input type="date" name="dueDate" id="dueDate" value={invoiceDetails.dueDate} onChange={handleInvoiceDetailChange} className="p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                    </div>
                                </div>
                            </div>

                            {/* Company Info */}
                            <div className="mb-6 border-b pb-4">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">{t.companyInfo}</h3>
                                <div className="grid grid-cols-1 gap-4">
                                    <input type="text" name="companyName" placeholder={t.companyName} value={invoiceDetails.companyName} onChange={handleInvoiceDetailChange} className="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                    <textarea name="companyAddress" placeholder={t.companyAddress} value={invoiceDetails.companyAddress} onChange={handleInvoiceDetailChange} rows="2" className="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                                    <input type="text" name="companyPhone" placeholder={t.companyPhone} value={invoiceDetails.companyPhone} onChange={handleInvoiceDetailChange} className="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                    <input type="email" name="companyEmail" placeholder={t.companyEmail} value={invoiceDetails.companyEmail} onChange={handleInvoiceDetailChange} className="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                    <div className="mt-4">
                                        <label htmlFor="companyLogo" className="block text-gray-700 text-sm font-bold mb-2">{t.companyLogo}</label>
                                        <input
                                            type="file"
                                            id="companyLogo"
                                            accept="image/*"
                                            onChange={handleLogoUpload}
                                            className="block w-full text-sm text-gray-500
                                                       file:mr-4 file:py-2 file:px-4
                                                       file:rounded-full file:border-0
                                                       file:text-sm file:font-semibold
                                                       file:bg-purple-50 file:text-purple-700
                                                       hover:file:bg-purple-100 cursor-pointer"
                                        />
                                        {invoiceDetails.logoImage && (
                                            <div className="mt-4 text-center">
                                                <p className="text-sm text-gray-600 mb-2">{t.logoPreview}</p>
                                                <img src={invoiceDetails.logoImage} alt="Company Logo" className="max-w-[100px] max-h-[100px] mx-auto border rounded-lg shadow-sm" />
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                            {/* Client Info */}
                            <div className="mb-6 border-b pb-4">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">{t.clientInfo}</h3>
                                <div className="grid grid-cols-1 gap-4">
                                    <input type="text" name="clientName" placeholder={t.clientName} value={invoiceDetails.clientName} onChange={handleInvoiceDetailChange} className="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
                                    <textarea name="clientAddress" placeholder={t.clientAddress} value={invoiceDetails.clientAddress} onChange={handleInvoiceDetailChange} rows="2" className="p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                            </div>

                            {/* Items */}
                            <div className="mb-6 border-b pb-4">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">{t.items}</h3>
                                {items.map(item => (
                                    <div key={item.id} className="grid grid-cols-1 md:grid-cols-5 gap-2 mb-3 p-3 border border-gray-200 rounded-lg relative">
                                        <input type="text" name="description" placeholder={t.description} value={item.description} onChange={(e) => handleItemChange(item.id, e)} className="p-2 border border-gray-300 rounded-lg col-span-full md:col-span-2" />
                                        <input type="number" name="quantity" placeholder={t.quantity} value={item.quantity} onChange={(e) => handleItemChange(item.id, e)} className="p-2 border border-gray-300 rounded-lg" min="0" />
                                        <input type="number" name="unitPrice" placeholder={t.unitPrice} value={item.unitPrice} onChange={(e) => handleItemChange(item.id, e)} className="p-2 border border-gray-300 rounded-lg" min="0" step="0.01" />
                                        <div className="p-2 flex items-center justify-end font-semibold text-gray-800 col-span-full md:col-span-1">
                                            {t.currency} {calculateItemTotal(item.quantity, item.unitPrice)}
                                        </div>
                                        {items.length > 1 && (
                                            <button onClick={() => deleteItem(item.id)} className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm shadow-md hover:bg-red-600 transition">
                                                <i className="fas fa-minus"></i>
                                            </button>
                                        )}
                                    </div>
                                ))}
                                <button onClick={addItem} className="bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition duration-200 ease-in-out flex items-center gap-2 mx-auto mt-4">
                                    <i className="fas fa-plus"></i> {t.addItem}
                                </button>
                            </div>

                            {/* Summary */}
                            <div className="mb-6 border-b pb-4">
                                <div className="grid grid-cols-2 gap-4 mb-2">
                                    <label className="text-gray-700 text-sm font-bold text-right">{t.subtotal}:</label>
                                    <span className="text-gray-800 font-semibold text-right">{t.currency} {subtotal.toFixed(2)}</span>
                                </div>
                                <div className="grid grid-cols-2 gap-4 mb-2">
                                    <label htmlFor="taxRate" className="text-gray-700 text-sm font-bold text-right">{t.taxRate}:</label>
                                    <input type="number" name="taxRate" id="taxRate" value={invoiceDetails.taxRate} onChange={handleInvoiceDetailChange} className="p-2 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-blue-500 text-right" min="0" step="0.01" />
                                </div>
                                <div className="grid grid-cols-2 gap-4 mb-2">
                                    <label htmlFor="discount" className="text-gray-700 text-sm font-bold text-right">{t.discount}:</label>
                                    <input type="number" name="discount" id="discount" value={invoiceDetails.discount} onChange={handleInvoiceDetailChange} className="p-2 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-blue-500 text-right" min="0" step="0.01" />
                                </div>
                                <div className="grid grid-cols-2 gap-4 pt-4 border-t-2 border-gray-300">
                                    <label className="text-gray-800 text-xl font-bold text-right">{t.grandTotal}:</label>
                                    <span className="text-purple-700 text-2xl font-extrabold text-right">{t.currency} {grandTotal}</span>
                                </div>
                            </div>

                            {/* Notes / Terms */}
                            <div className="mb-6">
                                <h3 className="text-xl font-bold text-gray-800 mb-4">{t.notesTerms}</h3>
                                <textarea name="notes" placeholder={t.notesTerms} value={invoiceDetails.notes} onChange={handleInvoiceDetailChange} rows="4" className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                            </div>

                            {/* Action Buttons */}
                            <div className="text-center mt-8 flex flex-col md:flex-row gap-4 justify-center">
                                <button
                                    onClick={handlePrint}
                                    className="bg-blue-600 text-white py-3 px-8 rounded-full text-lg font-bold
                                               hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-105
                                               shadow-lg flex items-center justify-center gap-2"
                                >
                                    <i className="fas fa-print mr-2"></i> {t.printInvoice}
                                </button>
                                <button
                                    onClick={downloadInvoice}
                                    className="bg-green-600 text-white py-3 px-8 rounded-full text-lg font-bold
                                               hover:bg-green-700 transition duration-300 ease-in-out transform hover:scale-105
                                               shadow-lg flex items-center justify-center gap-2"
                                >
                                    <i className="fas fa-download mr-2"></i> {t.downloadInvoice}
                                </button>
                            </div>
                            <p className="text-gray-500 text-xs mt-2 text-center">
                                {t.downloadFailMessage}
                            </p>
                        </div>

                        {/* Live Preview Section */}
                        <div className="w-full lg:w-1/2 p-4 flex items-center justify-center">
                            <div ref={invoiceRef} className="invoice-preview rounded-xl border-4 border-gray-300">
                                {/* Header */}
                                <div className="flex flex-col sm:flex-row justify-between items-start mb-8">
                                    <div>
                                        <h1 className="text-3xl sm:text-4xl font-extrabold text-purple-700 mb-2">{t.appTitle}</h1>
                                        <p className="text-lg text-gray-700">#{invoiceDetails.invoiceNumber}</p>
                                        <p className="text-sm text-gray-600">Date: {invoiceDetails.invoiceDate}</p>
                                        <p className="text-sm text-gray-600">Due Date: {invoiceDetails.dueDate}</p>
                                    </div>
                                    {invoiceDetails.logoImage && (
                                        <img src={invoiceDetails.logoImage} alt="Company Logo" className="max-w-[100px] max-h-[100px] object-contain mt-4 sm:mt-0 sm:ml-4 mx-auto sm:mx-0" onError={(e) => { e.target.onerror = null; e.target.src="https://placehold.co/100x100/cccccc/333333?text=Logo"; }} />
                                    )}
                                </div>

                                {/* Company & Client Info */}
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-8 mb-8">
                                    <div>
                                        <h3 className="text-lg font-bold text-gray-800 mb-2">{t.companyInfo}</h3>
                                        <p className="font-semibold text-gray-700">{invoiceDetails.companyName}</p>
                                        <p className="text-sm text-gray-600 whitespace-pre-wrap">{invoiceDetails.companyAddress}</p>
                                        <p className="text-sm text-gray-600">{invoiceDetails.companyPhone}</p>
                                        <p className="text-sm text-gray-600">{invoiceDetails.companyEmail}</p>
                                    </div>
                                    <div>
                                        <h3 className="text-lg font-bold text-gray-800 mb-2">{t.clientInfo}</h3>
                                        <p className="font-semibold text-gray-700">{invoiceDetails.clientName}</p>
                                        <p className="text-sm text-gray-600 whitespace-pre-wrap">{invoiceDetails.clientAddress}</p>
                                    </div>
                                </div>

                                {/* Items Table */}
                                <div className="mb-8 table-container">
                                    <table className="min-w-full bg-white border border-gray-200">
                                        <thead>
                                            <tr className="bg-gray-100 text-gray-700 uppercase text-sm leading-normal">
                                                <th className="py-3 px-6 text-left">{t.description}</th>
                                                <th className="py-3 px-6 text-center">{t.quantity}</th>
                                                <th className="py-3 px-6 text-right">{t.unitPrice}</th>
                                                <th className="py-3 px-6 text-right">{t.total}</th>
                                            </tr>
                                        </thead>
                                        <tbody className="text-gray-700 text-sm font-light">
                                            {items.map(item => (
                                                <tr key={item.id} className="border-b border-gray-200 hover:bg-gray-50">
                                                    <td className="py-3 px-6 text-left whitespace-nowrap">{item.description}</td>
                                                    <td className="py-3 px-6 text-center">{item.quantity}</td>
                                                    <td className="py-3 px-6 text-right">{t.currency} {item.unitPrice.toFixed(2)}</td>
                                                    <td className="py-3 px-6 text-right font-semibold">{t.currency} {calculateItemTotal(item.quantity, item.unitPrice)}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>

                                {/* Summary Totals */}
                                <div className="flex justify-end mb-8">
                                    <div className="w-full sm:w-1/2">
                                        <div className="flex justify-between mb-2">
                                            <span className="text-gray-700 font-semibold">{t.subtotal}:</span>
                                            <span className="text-gray-800">{t.currency} {subtotal.toFixed(2)}</span>
                                        </div>
                                        <div className="flex justify-between mb-2">
                                            <span className="text-gray-700 font-semibold">{t.taxRate} ({invoiceDetails.taxRate}%):</span>
                                            <span className="text-gray-800">{t.currency} {taxAmount.toFixed(2)}</span>
                                        </div>
                                        <div className="flex justify-between mb-2">
                                            <span className="text-gray-700 font-semibold">{t.discount}:</span>
                                            <span className="text-gray-800">- {t.currency} {invoiceDetails.discount.toFixed(2)}</span>
                                        </div>
                                        <div className="flex justify-between pt-4 border-t-2 border-gray-300">
                                            <span className="text-purple-700 text-xl font-bold">{t.grandTotal}:</span>
                                            <span className="text-purple-700 text-2xl font-extrabold">{t.currency} {grandTotal}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Notes / Terms */}
                                {invoiceDetails.notes && (
                                    <div className="mb-4">
                                        <h3 className="text-lg font-bold text-gray-800 mb-2">{t.notesTerms}</h3>
                                        <p className="text-sm text-gray-600 whitespace-pre-wrap">{invoiceDetails.notes}</p>
                                    </div>
                                )}

                                <div className="text-center text-gray-500 text-xs mt-8">
                                    <p>{t.appTitle} - {t.tagline}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the App component into the root div
        window.onload = function() {
            const rootElement = document.getElementById('root');
            if (rootElement) {
                const root = ReactDOM.createRoot(rootElement);
                root.render(<App />);
            }
        };
    </script>
</body>
</html>
